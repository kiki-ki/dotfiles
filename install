#! /usr/bin/env sh

set -eu

if [ "$(sudo echo hi)" != hi ]; then
  echo "Cannot use sudo."
else
  if (type "apt-get" > /dev/null 2>&1); then
    echo "apt-get command is not found. skip apt-get installation step"
  else
    echo "execute apt-get installation step"
    sudo apt-get update
    sudo apt-get install build-essential curl file git procps -y
  fi

  if (type "brew" > /dev/null 2>&1); then
    echo "brew command is not found. execute brew command installtion"
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  fi

  brew bundle --file ~/.Brewfile.ubuntu

  asdf plugin add nodejs https://github.com/asdf-vm/asdf-nodejs.git
  asdf install nodejs latest
fi

