#! /usr/bin/env sh

set -eu

if [ "$(sudo echo hi)" != hi ]; then
  echo "Cannot use sudo."
else
  sudo apt-get update
  sudo apt-get install build-essential curl file git procps -y

  if (type "brew" > /dev/null 2>&1); then
    echo "skip brew installtion step"
  else
    echo "execute brew installtion step"
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    . ~/.zshrc
  fi

  brew bundle --file ~/.Brewfile.ubuntu

  git clone --depth 1 -- https://github.com/marlonrichert/zsh-autocomplete.git ~/.zsh/zsh-autocomplete
  git clone --depth 1 -- https://github.com/romkatv/powerlevel10k.git ~/.zsh/powerlevel10k

  asdf plugin add nodejs https://github.com/asdf-vm/asdf-nodejs.git
  asdf install nodejs latest
fi

